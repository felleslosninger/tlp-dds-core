@use '../../../node_modules/@digdir/ds-tokens/build/tokens.scss' as *;
@use './typography.scss' as *;
@use './baseline/utils.scss' as utils;

$classname: '#{utils.$prefix}-checkbox';
// Color variables
$checkbox-color-unchecked: $color-neutral-grey-600;
$checkbox-color-checked: $color-interface-interaction;
$checkbox-color-disabled: $color-neutral-grey-500;
// Size variables
$checkbox-size-medium: $spacing-base-6;
$checkbox-size-large: $spacing-base-8;
$checkbox-checkmark-size-medium: $spacing-base-3;
$checkbox-checkmark-size-large: $spacing-base-5;
$checkbox-margin-label-medium: $spacing-base-2;
$checkbox-margin-label-large: $spacing-base-4;

.#{$classname} {
  display: inline-flex;
  align-items: center;
  box-sizing: border-box;
  cursor: pointer;
  @include text-body-300();

  & input.#{$classname}__input {
    box-sizing: border-box;
    cursor: pointer;
    // Hide browser-default checkmark appearance
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;

    flex-shrink: 0;
    flex-grow: 0;

    // Medium size
    width: $checkbox-size-medium;
    height: $checkbox-size-medium;
    margin: 0 $checkbox-margin-label-medium 0 0;

    border: $border-width-default solid $checkbox-color-unchecked;

    // Checkmark format
    background-repeat: no-repeat;
    background-position: 50%;
  }
  &:not([class*='#{$classname}--disabled']) > input.#{$classname}__input {
    &:hover:not(:checked) {
      background-image: #{utils.$icon-url-checkmark-hover};
      border-color: $checkbox-color-checked;
    }

    &:checked {
      background-image: #{utils.$icon-url-checkmark};
      border-color: $checkbox-color-checked;
    }
  }

  &--disabled {
    cursor: not-allowed;
    color: $checkbox-color-disabled;

    &:active {
      pointer-events: none;
    }

    & > input.#{$classname}__input {
      cursor: not-allowed;
      border-color: $checkbox-color-disabled;

      &:checked {
        background-image: #{utils.$icon-url-checkmark-disabled};
      }
    }
  }

  // Size modifiers
  &--large {
    @include text-body-400();

    & > input.#{$classname}__input {
      width: $checkbox-size-large;
      height: $checkbox-size-large;
      margin-right: $checkbox-margin-label-large;
    }
    &:not([class*='#{$classname}--disabled']) > input.#{$classname}__input {
      &:hover:not(:checked) {
        background-image: #{utils.$icon-url-checkmark-large-hover};
        border-color: $checkbox-color-checked;
      }

      &:checked {
        background-image: #{utils.$icon-url-checkmark-large};
        border-color: $checkbox-color-checked;
      }
    }
    &.#{$classname}--disabled > input.#{$classname}__input:checked {
      background-image: #{utils.$icon-url-checkmark-large-disabled};
    }
  }
}
