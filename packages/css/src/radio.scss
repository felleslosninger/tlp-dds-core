@use '../../../node_modules/@digdir/ds-tokens/build/tokens.scss' as *;
@use './typography.scss' as *;
@use './baseline/utils.scss' as utils;

$classname: '#{utils.$prefix}-radio';
// Color variables
$radio-color-unchecked: $color-neutral-grey-600;
$radio-color-checked: $color-interface-interaction;
$radio-color-disabled: $color-neutral-grey-500;
// Size variables
$radio-size-inner-medium: calc($spacing-base-6 - $border-width-default);
$radio-size-inner-large: calc($spacing-base-8 - $border-width-default);
$radio-size-checkmark-medium: $spacing-base-3;
$radio-size-checkmark-large: calc($radio-size-checkmark-medium * 1.5);
$radio-margin-label-medium: calc($spacing-base-2 + $border-width-default);
$radio-margin-label-large: calc($spacing-base-4 + $border-width-default);
$radio-border-width-inner-medium: calc(
  ($radio-size-inner-medium - $radio-size-checkmark-medium) / 2
);
$radio-border-width-inner-large: calc(
  ($radio-size-inner-large - $radio-size-checkmark-large) / 2
);

.#{$classname} {
  display: inline-flex;
  align-items: center;
  box-sizing: border-box;
  cursor: pointer;

  @include text-body-300();

  & input.#{$classname}__input {
    cursor: pointer;
    // Hide browser-default radio appearance
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;

    flex-shrink: 0;
    flex-grow: 0;

    // Medium size
    width: $radio-size-inner-medium;
    height: $radio-size-inner-medium;
    margin-right: $radio-margin-label-medium;

    // Custom radio appearance
    border-radius: 50%;
    background-color: $color-neutral-white;
    // Inner border
    border: $radio-border-width-inner-medium solid $color-neutral-white;
    // Outer border
    box-shadow: 0 0 0 $border-width-default $radio-color-unchecked;
    // Correct offsets for box-shadow outer border
    margin-top: $border-width-default;
    margin-bottom: $border-width-default;
    margin-left: $border-width-default;
    outline-offset: calc($border-width-default + utils.$base-outline-offset);
  }
  &:not([class*='#{$classname}--disabled']) > input.#{$classname}__input {
    &:hover:not(:checked) {
      background-color: $color-interface-interaction-light;
      box-shadow: 0 0 0 $border-width-default $radio-color-checked;
    }
    &:checked {
      background-color: $radio-color-checked;
      box-shadow: 0 0 0 $border-width-default $radio-color-checked;
    }
  }

  &--disabled {
    cursor: not-allowed;
    color: $radio-color-disabled;

    &:active {
      pointer-events: none;
    }

    & > input.#{$classname}__input {
      cursor: not-allowed;
      box-shadow: 0 0 0 $border-width-default $radio-color-disabled;

      &:checked {
        background-color: $radio-color-disabled;
      }
    }
  }

  // Size modifiers
  &--large {
    @include text-body-400();

    & > input.#{$classname}__input {
      width: $radio-size-inner-large;
      height: $radio-size-inner-large;
      margin-right: $radio-margin-label-large;

      border: $radio-border-width-inner-large solid $color-neutral-white;
    }
  }
}
