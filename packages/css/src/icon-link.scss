@use '@digdir/ds-tokens/build/tokens.scss' as *;
@use './typography.scss' as *;
@use './baseline/utils.scss' as utils;

// Color variables
$link-color-default: $color-interface-interaction;
$link-color-border-default: $color-neutral-grey-400;
// Size variables
$link-size-medium: $spacing-base-4;
$link-size-large: $spacing-base-6;
$link-icon-size-medium: $spacing-base-4;
$link-icon-size-large: $spacing-base-6;
$link-padding-label-medium: $spacing-base-1;
$link-padding-label-large: $spacing-base-2;
$link-margin-icon-medium: ($link-icon-size-medium + $link-padding-label-medium);
$link-margin-icon-large: ($link-icon-size-large + $link-padding-label-large);

.#{utils.$prefix}-icon-link {
  cursor: pointer;
  position: relative;
  text-decoration: none;
  overflow-wrap: anywhere;
  box-sizing: border-box;

  @include text-interface-300();
  color: $color-text-background-light;

  border-bottom: $border-width-thin solid $color-neutral-grey-400;

  transition: all $duration-normal;
  transition-property: border-color, padding-bottom;

  // Make room for medium icon
  margin-right: $link-margin-icon-medium;

  // Elements
  & > &__icon {
    display: inline-block;
    position: absolute;
    box-sizing: content-box;

    width: $link-icon-size-medium;
    height: $link-icon-size-medium;
    padding-left: $link-padding-label-medium;
    padding-top: $border-width-default;

    flex-shrink: 0;
    flex-grow: 0;
  }

  // States
  &:focus-visible {
    // Fit icon in focus outline
    padding-right: $link-margin-icon-medium;
    margin-right: 0;
  }
  // Compatibility for browsers not supporting :focus-visible (Safari, IE)
  &:focus {
    padding-right: $link-margin-icon-medium;
    margin-right: 0;
  }
  &:focus:not(:focus-visible) {
    padding-right: 0;
    margin-right: $link-margin-icon-medium;
    outline: none;
  }

  &:hover {
    border-color: $color-interface-interaction;
    border-width: $border-width-default;
  }

  &:visited {
    color: $color-interface-visited;

    &:hover {
      border-color: $color-interface-visited;
    }
  }

  &:visited > &__icon {
    fill: $color-interface-visited;
  }

  // Size modifiers
  &--large {
    @include text-interface-400();
    margin-right: $link-margin-icon-large;
  }
  &--large > &__icon {
    width: $link-icon-size-large;
    height: $link-icon-size-large;
    padding-left: $link-padding-label-large;
    padding-top: 0;
  }
}
